(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{194:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("To get started with GraphQL in your app, please install the plugin first. To do that, open your terminal and run the following command:")]),t._v(" "),t._m(3),n("p",[t._v("Then, start your app and open your browser at "),n("a",{attrs:{href:"http://localhost:1337/playground",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:1337/playground"),n("OutboundLink")],1),t._v(". You should see the interface (GraphQL Playground) that will help you to write GraphQL query to explore your data.")]),t._v(" "),n("blockquote",[n("p",[t._v("Install the "),n("a",{attrs:{href:"https://chrome.google.com/webstore/detail/modheader/idgpnmonknjnojddfkpgkljpfnnfcklj/related",target:"_blank",rel:"noopener noreferrer"}},[t._v("ModHeader"),n("OutboundLink")],1),t._v(" extension to set the "),n("code",[t._v("Authorization")]),t._v(" header in your request")])]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),n("p",[t._v("You can also apply different parameters to the query to make more complex queries.")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),n("p",[t._v("Return the users which have been created after the March, 19th 2018 4:21 pm.")]),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),n("p",[t._v("The generated GraphQL type and queries will be:")]),t._v(" "),t._m(26),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),n("p",[t._v("Strapi now supports Aggregation & Grouping.\nLet's consider again the model mentioned above:")]),t._v(" "),t._m(30),n("p",[t._v("Strapi will generate automatically for you the following queries & types:")]),t._v(" "),t._m(31),t._v(" "),t._m(32),n("p",[t._v("Getting the total count and the average likes of posts:")]),t._v(" "),t._m(33),n("p",[t._v("Let's say we want to do the same query but for only published posts")]),t._v(" "),t._m(34),n("p",[t._v("Gettings the average likes of published and unpublished posts")]),t._v(" "),t._m(35),n("p",[t._v("Result")]),t._v(" "),t._m(36),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._m(50),t._v(" "),t._m(51),t._m(52),t._v(" "),t._m(53),t._m(54),t._v(" "),n("p",[t._v("One of the most powerful features of GraphQL is the auto-documentation of the schema. The GraphQL plugin allows you to add a description to a type, a field and a query. You can also deprecate a field or a query.")]),t._v(" "),t._m(55),t._v(" "),t._m(56),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),t._m(60),t._m(61),t._v(" "),n("p",[t._v("Sometimes a query needs to be only accessible to authenticated user. To handle this, Strapi provides a solid policy system. A policy is a function executed before the final action (the resolver). You can define an array of policy that will be executed in order.")]),t._v(" "),t._m(62),t._m(63),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),t._v(" "),t._m(67),t._m(68),t._v(" "),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),n("p",[t._v("You can also execute a custom logic like above. However, the roles and permissions layers won't work.")]),t._v(" "),t._m(72),t._v(" "),t._m(73),t._v(" "),t._m(74),t._m(75),t._v(" "),t._m(76),t._v(" "),t._m(77),t._m(78),t._v(" "),t._m(79),t._v(" "),t._m(80),t._v(" "),t._m(81),t._v(" "),n("p",[t._v("We recommend to put the field description and deprecated reason in the model. Right now, the GraphQL plugin is the only which uses these fields. Another plugin could use this description in the future as well. However, sometimes you don't have the choice, especially when you're defining a custom type.")]),t._v(" "),t._m(82),t._v(" "),t._m(83),t._v(" "),t._m(84)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"graphql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#graphql","aria-hidden":"true"}},[this._v("#")]),this._v(" GraphQL")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("This feature requires the GraphQL plugin (not installed by default).")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[this._v("#")]),this._v(" Usage")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("strapi install graphql\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"configurations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configurations","aria-hidden":"true"}},[this._v("#")]),this._v(" Configurations")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("By default, the "),s("a",{attrs:{href:"#shadow-crud"}},[this._v("Shadow CRUD")]),this._v(" feature is enabled and the GraphQL is set to "),s("code",[this._v("/graphql")]),this._v(". You can edit these configurations in the following files.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Path â€”")]),this._v(" "),s("code",[this._v("./plugins/graphql/config/settings.json")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('{\n  "endpoint": "/graphql",\n  "shadowCRUD": true,\n  "depthLimit": 7\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"query-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#query-api","aria-hidden":"true"}},[this._v("#")]),this._v(" Query API")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In the section, we assume that the "),s("a",{attrs:{href:"#shadow-crud"}},[this._v("Shadow CRUD")]),this._v(" feature is enabled. For each model, the plugin auto-generates queries which just fit to your needs.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",{attrs:{id:"fetch-a-single-entry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch-a-single-entry","aria-hidden":"true"}},[this._v("#")]),this._v(" Fetch a single entry")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("id")]),this._v(": String")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('query {\n  user(id: "5aafe871ad624b7380d7a224") {\n    username\n    email\n  }\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",{attrs:{id:"fetch-multiple-entries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch-multiple-entries","aria-hidden":"true"}},[this._v("#")]),this._v(" Fetch multiple entries")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("query {\n  users {\n    username\n    email\n  }\n}\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Filters")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("code",[t._v("limit")]),t._v(" (integer): Define the number of returned entries.")]),t._v(" "),n("li",[n("code",[t._v("start")]),t._v(" (integer): Define the amount of entries to skip.")]),t._v(" "),n("li",[n("code",[t._v("sort")]),t._v(" (string): Define how the data should be sorted.")]),t._v(" "),n("li",[n("code",[t._v("where")]),t._v(" (object): Define the filters to apply in the query.\n"),n("ul",[n("li",[n("code",[t._v("<field>")]),t._v(": Equals.")]),t._v(" "),n("li",[n("code",[t._v("<field>_ne")]),t._v(": Not equals.")]),t._v(" "),n("li",[n("code",[t._v("<field>_lt")]),t._v(": Lower than.")]),t._v(" "),n("li",[n("code",[t._v("<field>_lte")]),t._v(": Lower than or equal to.")]),t._v(" "),n("li",[n("code",[t._v("<field>_gt")]),t._v(": Greater than.")]),t._v(" "),n("li",[n("code",[t._v("<field>_gte")]),t._v(": Lower than or equal to.")]),t._v(" "),n("li",[n("code",[t._v("<field>_contains")]),t._v(": Contains.")]),t._v(" "),n("li",[n("code",[t._v("<field>_containss")]),t._v(": Contains sensitive.")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Return the second decade of users which have an email that contains "),s("code",[this._v("@strapi.io")]),this._v(" ordered by username.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('query {\n  users(limit: 10, start: 10, sort: "username:asc", where: {\n    email_contains: "@strapi.io"\n  }) {\n    username\n    email\n  }\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('query {\n  users(where: {\n    createdAt_gt: "2018-03-19 16:21:07.161Z"\n  }) {\n    username\n    email\n  }\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"shadow-crud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shadow-crud","aria-hidden":"true"}},[this._v("#")]),this._v(" Shadow CRUD")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("To simplify and automate the build of the GraphQL schema, we introduced the Shadow CRUD feature. It automatically generates the type definition, queries and resolvers based on your models. The feature also lets you make complex query with many arguments such as "),n("code",[t._v("limit")]),t._v(", "),n("code",[t._v("sort")]),t._v(", "),n("code",[t._v("start")]),t._v(" and "),n("code",[t._v("where")]),t._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[this._v("#")]),this._v(" Example")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you've generated an API called "),s("code",[this._v("Post")]),this._v(" using the CLI "),s("code",[this._v("strapi generate:api post")]),this._v(" or the administration panel, your model looks like this:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Path â€”")]),this._v(" "),s("code",[this._v("./api/post/models/Post.settings.json")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('{\n  "connection": "default",\n  "options": {\n    "timestamps": true\n  },\n  "attributes": {\n    "title": {\n      "type": "string"\n    }\n    "content": {\n      "type": "text"\n    },\n    "published": {\n      "type": "boolean"\n    }\n  }\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("type Post {\n  _id: String\n  created_at: String\n  updated_at: String\n  title: String\n  content: String\n  published: Boolean\n}\n\ntype Query {\n  posts(sort: String, limit: Int, start: Int, where: JSON): [Post]\n  post(id: String!): Post\n}\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("The query will use the generated controller's actions as resolvers. It means that the "),n("code",[t._v("posts")]),t._v(" query will execute the "),n("code",[t._v("Post.find")]),t._v(" action and the "),n("code",[t._v("post")]),t._v(" query will use the "),n("code",[t._v("Post.findOne")]),t._v(" action.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"aggregation-grouping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aggregation-grouping","aria-hidden":"true"}},[this._v("#")]),this._v(" Aggregation & Grouping")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("This feature is only available on Mongoose ORM.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("type Post {\n  _id: ID\n  createdAt: String\n  updatedAt: String\n  title: String\n  content: String\n  nb_likes: Int,\n  published: Boolean\n}\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"aggregation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aggregation","aria-hidden":"true"}},[this._v("#")]),this._v(" Aggregation")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("type PostConnection {\n  values: [Post]\n  groupBy: PostGroupBy\n  aggregate: PostAggregator\n}\n\ntype PostGroupBy {\n  _id: [PostConnection_id]\n  createdAt: [PostConnectionCreatedAt]\n  updatedAt: [PostConnectionUpdatedAt]\n  title: [PostConnectionTitle]\n  content: [PostConnectionContent]\n  nb_likes: [PostConnectionNbLikes],\n  published: [PostConnectionPublished]\n}\n\ntype PostConnectionPublished {\n  key: Boolean\n  connection: PostConnection\n}\n\ntype PostAggregator {\n  count: Int\n  sum: PostAggregatorSum\n  avg: PostAggregatorAvg\n  min: PostAggregatorMin\n  max: PostAggregatorMax\n}\n\ntype PostAggregatorAvg {\n  nb_likes: Float\n}\n\ntype PostAggregatorMin { // Same for max and sum\n  nb_likes: Int\n}\n\ntype Query {\n  postsConnection(sort: String, limit: Int, start: Int, where: JSON): PostConnection\n}\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("postsConnection {\n  aggregate {\n    count\n    avg {\n      nb_likes\n    }\n  }\n\n}\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("postsConnection(where: { published: true }) {\n  aggregate {\n    count\n    avg {\n      nb_likes\n    }\n  }\n\n}\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("postsConnection {\n  groupBy {\n    published: {\n      key\n      connection {\n        aggregate {\n          avg {\n            nb_likes\n          }\n        }\n      }\n    }\n  }\n}\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  data"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    postsConnection"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      groupBy"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        published"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            key"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            connection"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              aggregate"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                avg "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  nb_likes"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("10")]),t._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            key"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            connection"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              aggregate"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                avg "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  nb_likes"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n                "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"customise-the-graphql-schema"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#customise-the-graphql-schema","aria-hidden":"true"}},[this._v("#")]),this._v(" Customise the GraphQL schema")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you want to define a new scalar, input or enum types, this section is for you. To do so, you will have to create a "),s("code",[this._v("schema.graphql")]),this._v(" file. This file has to be placed into the config folder of each API "),s("code",[this._v("./api/*/config/schema.graphql")]),this._v(" or plugin "),s("code",[this._v("./plugins/*/config/schema.graphql")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Structure â€”")]),this._v(" "),s("code",[this._v("schema.graphql")]),this._v(".")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  definition"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("``")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("``")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  type"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("code",[t._v("definition")]),t._v(" (string): let's you define new type, input, etc.")]),t._v(" "),n("li",[n("code",[t._v("query")]),t._v(" (string): where you add custom query.")]),t._v(" "),n("li",[n("code",[t._v("type")]),t._v(" (object): allows you to add description, deprecated field or disable the "),n("a",{attrs:{href:"#shadow-crud"}},[t._v("Shadow CRUD")]),t._v(" feature on a specific type.")]),t._v(" "),n("li",[n("code",[t._v("resolver")]),t._v(" (object):\n"),n("ul",[n("li",[n("code",[t._v("Query")]),t._v(" (object): let's you define custom resolver, policies for a query.")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"example-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Example")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Let say we are using the same previous "),s("code",[this._v("Post")]),this._v(" model.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Path â€”")]),this._v(" "),s("code",[this._v("./api/post/config/schema.graphql")]),this._v(".")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  definition"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`\n    enum PostStatusInput {\n      draft\n      reviewing\n      reviewed\n      published\n      deleted\n    }\n  `")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`\n    postsByAuthor(id: String, status: PostStatusInput, limit: Int): [Post]!\n  `")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      post"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a single post'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        policy"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v("'plugins.users-permissions.isAuthenticated'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'isOwner'")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Apply the 'isAuthenticated' policy of the `Users & Permissions` plugin, then the 'isOwner' policy before executing the resolver.")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a list of posts'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Add a description to the query.")]),t._v("\n        deprecated"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'This query should not be used anymore. Please consider using postsByAuthor instead.'")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      postsByAuthor"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return the posts published by the author'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Post.findByAuthor'")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      postsByTags"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return the posts published by the author'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        resolverOf"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Post.findByTags'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Will apply the same policy on the custom resolver than the controller's action `findByTags`.")]),t._v("\n        resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{attrs:{class:"token comment"}},[t._v("// ctx is the context of the Koa request.")]),t._v("\n          "),n("span",{attrs:{class:"token keyword"}},[t._v("await")]),t._v(" strapi"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("controllers"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("findByTags")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n          "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctx"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("posts "),n("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`There is no post.`")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"define-a-new-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#define-a-new-type","aria-hidden":"true"}},[this._v("#")]),this._v(" Define a new type")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Edit the "),s("code",[this._v("definition")]),this._v(" attribute in one of the "),s("code",[this._v("schema.graphql")]),this._v(" files of your project by using the GraphQL Type language string.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"note custom-block"},[s("p",[this._v("The easiest way is to create a new model using the CLI "),s("code",[this._v("strapi generate:model category --api post")]),this._v(", so you don't need to customise anything.")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  definition"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`\n    type Person {\n      id: Int!\n      firstname: String!\n      lastname: String!\n      age: Int\n      children: [Person]\n    }\n  `")])]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("To explore the data of the new type "),s("code",[this._v("Person")]),this._v(", you need to define a query and associate a resolver to this query.")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  definition"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`\n    type Person {\n      id: Int!\n      firstname: String!\n      lastname: String!\n      age: Int\n      children: [Person]\n    }\n  `")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`\n    person(id: Int!): Person\n  `")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  type"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Person"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      _description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'The Person type description'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Set the description for the type itself.")]),t._v("\n      firstname"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'The firstname of the person'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      lastname"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'The lastname of the person'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      age"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'The age of the person'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        deprecated"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'We are not using the age anymore, we can find it thanks to our powerful AI'")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      children"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'The children of the person'")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      person"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a single person'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Person.findOne'")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// It will use the action `findOne` located in the `Person.js` controller*.")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("The resolver parameter also accepts an object as a value to target a controller located in a plugin.")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      person"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a single person'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          plugin"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'users-permissions'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          handler"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'User.findOne'")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// It will use the action `findOne` located in the `Person.js` controller inside the plugin `Users & Permissions`.")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"add-description-and-deprecated-reason"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-description-and-deprecated-reason","aria-hidden":"true"}},[this._v("#")]),this._v(" Add description and deprecated reason")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Path â€”")]),this._v(" "),s("code",[this._v("./api/post/models/Post.settings.json")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('{\n  "connection": "default",\n  "info": {\n    "description": "The Post type description"\n  },\n  "options": {\n    "timestamps": true\n  },\n  "attributes": {\n    "title": {\n      "type": "string",\n      "description": "The title of the post",\n      "deprecated": "We are not using the title anymore, it is auto-generated thanks to our powerful AI"\n    },\n    "content": {\n      "type": "text",\n      "description": "The content of the post."\n    },\n    "published": {\n      "type": "boolean",\n      "description": "Is the post published or not. Yes = true."\n    }\n  }\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("It might happens that you want to add a description to a query or deprecate it. To do that, you need to use the "),s("code",[this._v("schema.graphql")]),this._v(" file.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("Remember: The "),s("code",[this._v("schema.graphql")]),this._v(" file has to be placed into the config folder of each API "),s("code",[this._v("./api/*/config/schema.graphql")]),this._v(" or plugin "),s("code",[this._v("./plugins/*/config/schema.graphql")]),this._v(".")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Path â€”")]),this._v(" "),s("code",[this._v("./api/post/config/schema.graphql")]),this._v(".")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a list of posts'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Add a description to the query.")]),t._v("\n        deprecated"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'This query should not be used anymore. Please consider using postsByAuthor instead.'")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Deprecate the query and explain the reason why.")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"execute-a-policy-before-a-resolver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#execute-a-policy-before-a-resolver","aria-hidden":"true"}},[this._v("#")]),this._v(" Execute a policy before a resolver")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a list of posts'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        policy"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v("'plugins.users-permissions.isAuthenticated'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'isOwner'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'global.logging'")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("In this example, the policy "),n("code",[t._v("isAuthenticated")]),t._v(" located in "),n("code",[t._v("./plugins/users-permissions/config/policies/isAuthenticated.js")]),t._v(" will be executed first. Then, the "),n("code",[t._v("isOwner")]),t._v(" policy located in the "),n("code",[t._v("Post")]),t._v(" API "),n("code",[t._v("./api/post/config/policies/isOwner.js")]),t._v(". Next, it will execute the "),n("code",[t._v("logging")]),t._v(" policy located in "),n("code",[t._v("./config/policies/logging.js")]),t._v(". Finally, the resolver will be executed.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"note custom-block"},[s("p",[this._v("There is no custom resolver in that case, so it will execute the default resolver (Post.find) provided by the Shadow CRUD feature.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"link-a-query-to-a-controller-action"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#link-a-query-to-a-controller-action","aria-hidden":"true"}},[this._v("#")]),this._v(" Link a query to a controller action")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("By default, the plugin will execute the actions located in the controllers that has been generated via the Content-Type Builder plugin or the CLI. For example, the query "),s("code",[this._v("posts")]),this._v(" is going to execute the logic inside the "),s("code",[this._v("find")]),this._v(" action in the "),s("code",[this._v("Post.js")]),this._v(" controller. It might happens that you want to execute another action or a custom logic for one of your query.")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a list of posts by author'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Post.findByAuthor'")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("In this example, it will execute the "),n("code",[t._v("findByAuthor")]),t._v(" action of the "),n("code",[t._v("Post")]),t._v(" controller. It also means that the resolver will apply on the "),n("code",[t._v("posts")]),t._v(" query the permissions defined on the "),n("code",[t._v("findByAuthor")]),t._v(" action (through the administration panel).")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"note custom-block"},[n("p",[t._v("The "),n("code",[t._v("obj")]),t._v(" parameter is available via "),n("code",[t._v("ctx.params")]),t._v(" and the "),n("code",[t._v("options")]),t._v(" are available via "),n("code",[t._v("ctx.query")]),t._v(" in the controller's action.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"define-a-custom-resolver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#define-a-custom-resolver","aria-hidden":"true"}},[this._v("#")]),this._v(" Define a custom resolver")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a list of posts by author'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{attrs:{class:"token comment"}},[t._v("// You can return a raw JSON object or a promise.")]),t._v("\n\n          "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            title"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'My first blog post'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            content"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Whatever you want...'")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"apply-permissions-on-a-query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apply-permissions-on-a-query","aria-hidden":"true"}},[this._v("#")]),this._v(" Apply permissions on a query")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("It might happens that you want apply our permissions layer on a query. That's why, we created the "),s("code",[this._v("resolverOf")]),this._v(" attribute. This attribute defines which are the permissions that should be applied to this resolver. By targeting an action it means that you're able to edit permissions for this resolver directly from the administration panel.")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        description"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Return a list of posts by author'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        resolverOf"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Post.find'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Will apply the same policy on the custom resolver than the controller's action `find` located in `Post.js`.")]),t._v("\n        resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{attrs:{class:"token comment"}},[t._v("// You can return a raw JSON object or a promise.")]),t._v("\n\n          "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            title"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'My first blog post'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            content"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'Whatever you want...'")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"disable-a-query-or-a-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#disable-a-query-or-a-type","aria-hidden":"true"}},[this._v("#")]),this._v(" Disable a query or a type")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("To do that, we need to use the "),s("code",[this._v("schema.graphql")]),this._v(" like below:")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Post"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v('// The Post type won\'t be "queriable".')]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  resolver"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      posts"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// The `posts` query will no longer be in the GraphQL schema.")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"faq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#faq","aria-hidden":"true"}},[this._v("#")]),this._v(" FAQ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("How are the types name defined?")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The type name is the global ID of the model. You can find the global ID of a model like that "),s("code",[this._v("strapi.models[xxx].globalId")]),this._v(" or "),s("code",[this._v("strapi.plugins[xxx].models[yyy].globalId")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Where should I put the field description and deprecated reason?")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"note custom-block"},[s("p",[this._v("It's not a bad practice to put the description and deprecated attribute in the "),s("code",[this._v("schema.graphql")]),this._v(", though.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v('Why are the "createdAt" and "updatedAt" field added to my type?')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The plugin detects if the "),s("code",[this._v("timestamps")]),this._v(" option is set to "),s("code",[this._v("true")]),this._v(" in the model. By default, when you generate an API this option is checked. Set it to "),s("code",[this._v("false")]),this._v(" in your model to remove these fields.")])}],!1,null,null,null);e.options.__file="graphql.md";s.default=e.exports}}]);