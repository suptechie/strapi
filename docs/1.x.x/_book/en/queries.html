
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Query Language Â· Strapi documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        <meta name="author" content="Strapi">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="queries.html" />
    
    
    <link rel="prev" href="models.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" >
            
                <a target="_blank" href="http://strapi.io">
            
                    
                    Website
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <a target="_blank" href="https://github.com/strapi/strapi">
            
                    
                    GitHub
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Documentation
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="introduction.html">
            
                <a href="introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="introduction.html">
            
                <a href="introduction.html#getting-started">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="introduction.html">
            
                <a href="introduction.html#alternatives">
            
                    
                    Alternatives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="introduction.html">
            
                <a href="introduction.html#key-features">
            
                    
                    Key-features
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="cli.html">
            
                <a href="cli.html">
            
                    
                    Command-Line Interface
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="cli.html">
            
                <a href="cli.html#login">
            
                    
                    Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="cli.html">
            
                <a href="cli.html#create-a-new-project">
            
                    
                    Create a new project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="cli.html">
            
                <a href="cli.html#start-the-server">
            
                    
                    Start the server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="cli.html">
            
                <a href="cli.html#access-the-console">
            
                    
                    Access the console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="cli.html">
            
                <a href="cli.html#generate-an-api">
            
                    
                    Generate an API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="cli.html">
            
                <a href="cli.html#print-the-strapi-version">
            
                    
                    Print the Strapi version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.7" data-path="cli.html">
            
                <a href="cli.html#link-your-application">
            
                    
                    Link your application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.8" data-path="cli.html">
            
                <a href="cli.html#logout">
            
                    
                    Logout
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="configuration.html">
            
                <a href="configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="configuration.html">
            
                <a href="configuration.html#application-package">
            
                    
                    Application package
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="configuration.html">
            
                <a href="configuration.html#global-settings">
            
                    
                    Global settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="configuration.html">
            
                <a href="configuration.html#general-environment-settings">
            
                    
                    General environment settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="configuration.html">
            
                <a href="configuration.html#request">
            
                    
                    Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.5" data-path="configuration.html">
            
                <a href="configuration.html#response">
            
                    
                    Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.6" data-path="configuration.html">
            
                <a href="configuration.html#databases">
            
                    
                    Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.7" data-path="configuration.html">
            
                <a href="configuration.html#security">
            
                    
                    Security
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="router.html">
            
                <a href="router.html">
            
                    
                    Router
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="router.html">
            
                <a href="router.html#route-format">
            
                    
                    Route format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="router.html">
            
                <a href="router.html#route-parameters">
            
                    
                    Route parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="router.html">
            
                <a href="router.html#router-prefix">
            
                    
                    Router prefix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.4" data-path="router.html">
            
                <a href="router.html#policies-and-route-process">
            
                    
                    Policies and route process
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="blueprints.html">
            
                <a href="blueprints.html">
            
                    
                    Blueprints
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="blueprints.html">
            
                <a href="blueprints.html#find-records">
            
                    
                    find records
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="blueprints.html">
            
                <a href="blueprints.html#findone-record">
            
                    
                    findOne record
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3" data-path="blueprints.html">
            
                <a href="blueprints.html#create-a-record">
            
                    
                    create a record
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.4" data-path="blueprints.html">
            
                <a href="blueprints.html#update-a-record">
            
                    
                    update a record
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.5" data-path="blueprints.html">
            
                <a href="blueprints.html#destroy-a-record">
            
                    
                    destroy a record
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.6" data-path="blueprints.html">
            
                <a href="blueprints.html#add-to-a-record">
            
                    
                    add to a record
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.7" data-path="blueprints.html">
            
                <a href="blueprints.html#remove-from-a-record">
            
                    
                    remove from a record
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="models.html">
            
                <a href="models.html">
            
                    
                    Models
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="models.html">
            
                <a href="models.html#model-settings">
            
                    
                    Model settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="models.html">
            
                <a href="models.html#associations">
            
                    
                    Associations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="models.html">
            
                <a href="models.html#lifecycle-callbacks">
            
                    
                    Lifecycle Callbacks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter active" data-level="9.1" data-path="queries.html">
            
                <a href="queries.html">
            
                    
                    Query Language
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1.1" data-path="queries.html">
            
                <a href="queries.html#query-methods">
            
                    
                    Query Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.1.2" data-path="queries.html">
            
                <a href="queries.html#query-language">
            
                    
                    Query Language
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="graphql.html">
            
                <a href="graphql.html">
            
                    
                    GraphQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1.1" data-path="graphql.html">
            
                <a href="graphql.html#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.2" data-path="graphql.html">
            
                <a href="graphql.html#execute-simple-query">
            
                    
                    Execute simple query
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.3" data-path="graphql.html">
            
                <a href="graphql.html#execute-complex-queries">
            
                    
                    Execute complex queries
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="internationalization.html">
            
                <a href="internationalization.html">
            
                    
                    Internationalization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.1.1" data-path="internationalization.html">
            
                <a href="internationalization.html#i18n-settings">
            
                    
                    i18n settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.1.2" data-path="internationalization.html">
            
                <a href="internationalization.html#locales">
            
                    
                    Locales
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.1.3" data-path="internationalization.html">
            
                <a href="internationalization.html#translate-responses">
            
                    
                    Translate responses
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="12.1" data-path="sessions.html">
            
                <a href="sessions.html">
            
                    
                    Sessions
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="13.1" data-path="services.html">
            
                <a href="services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="14.1" data-path="views.html">
            
                <a href="views.html">
            
                    
                    Views
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="14.1.1" data-path="views.html">
            
                <a href="views.html#render-a-view">
            
                    
                    Render a view
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="14.1.2" data-path="views.html">
            
                <a href="views.html#supported-template-engines">
            
                    
                    Supported template engines
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="15.1" data-path="logging.html">
            
                <a href="logging.html">
            
                    
                    Logging
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="15.1.1" data-path="logging.html">
            
                <a href="logging.html#logging-with-metadata">
            
                    
                    Logging with Metadata
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.1.2" data-path="logging.html">
            
                <a href="logging.html#string-interpolation">
            
                    
                    String interpolation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.1.3" data-path="logging.html">
            
                <a href="logging.html#logging-levels">
            
                    
                    Logging levels
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="16.1" data-path="context.html">
            
                <a href="context.html">
            
                    
                    Context
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1.1" data-path="context.html">
            
                <a href="context.html#api">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="16.1.2" data-path="context.html">
            
                <a href="context.html#request-aliases">
            
                    
                    Request aliases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="16.1.3" data-path="context.html">
            
                <a href="context.html#response-aliases">
            
                    
                    Response aliases
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="17.1" data-path="request.html">
            
                <a href="request.html">
            
                    
                    Request
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="18.1" data-path="response.html">
            
                <a href="response.html">
            
                    
                    Response
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="19.1" data-path="admin.html">
            
                <a href="admin.html">
            
                    
                    Admin
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="19.1.1" data-path="admin.html">
            
                <a href="admin.html#dashboard">
            
                    
                    Dashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.1.2" data-path="admin.html">
            
                <a href="admin.html#data-explorer">
            
                    
                    Data Explorer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.1.3" data-path="admin.html">
            
                <a href="admin.html#users">
            
                    
                    Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.1.4" data-path="admin.html">
            
                <a href="admin.html#customization">
            
                    
                    Customization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="20.1" data-path="users.html">
            
                <a href="users.html">
            
                    
                    Users
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="20.1.1" data-path="users.html">
            
                <a href="users.html#local-registration">
            
                    
                    Local Registration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="20.1.2" data-path="users.html">
            
                <a href="users.html#local-login">
            
                    
                    Local Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="20.1.3" data-path="users.html">
            
                <a href="users.html#authentication">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="20.1.4" data-path="users.html">
            
                <a href="users.html#providers">
            
                    
                    Providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="20.1.5" data-path="users.html">
            
                <a href="users.html#custom-providers">
            
                    
                    Custom providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="20.1.6" data-path="users.html">
            
                <a href="users.html#forgot-password">
            
                    
                    Forgot password
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="20.1.7" data-path="users.html">
            
                <a href="users.html#change-password">
            
                    
                    Change password
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="20.1.8" data-path="users.html">
            
                <a href="users.html#accessing-user-from-requests">
            
                    
                    Accessing user from requests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="21.1" data-path="email.html">
            
                <a href="email.html">
            
                    
                    Email
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="21.1.1" data-path="email.html">
            
                <a href="email.html#email-config">
            
                    
                    Email config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.1.2" data-path="email.html">
            
                <a href="email.html#email-service">
            
                    
                    Email service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.1.3" data-path="email.html">
            
                <a href="email.html#email-api">
            
                    
                    Email API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.1.4" data-path="email.html">
            
                <a href="email.html#email-model">
            
                    
                    Email model
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="22.1" data-path="upload.html">
            
                <a href="upload.html">
            
                    
                    Upload
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="22.1.1" data-path="upload.html">
            
                <a href="upload.html#upload-config">
            
                    
                    Upload config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.1.2" data-path="upload.html">
            
                <a href="upload.html#upload-service">
            
                    
                    Upload service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.1.3" data-path="upload.html">
            
                <a href="upload.html#upload-api">
            
                    
                    Upload API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.1.4" data-path="upload.html">
            
                <a href="upload.html#upload-model">
            
                    
                    Upload model
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="23.1" data-path="customization.html">
            
                <a href="customization.html">
            
                    
                    Customization
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="24.1" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="24.1.1" data-path="testing.html">
            
                <a href="testing.html#setup">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="24.1.2" data-path="testing.html">
            
                <a href="testing.html#boostrap">
            
                    
                    Bootstrap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="24.1.3" data-path="testing.html">
            
                <a href="testing.html#writing-tests">
            
                    
                    Writing tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="24.1.4" data-path="testing.html">
            
                <a href="testing.html#running-tests">
            
                    
                    Running tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Query Language</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h1 id="query-interface">Query Interface</h1>
<p>The Waterline Query Interface allows you to interact with your models the same
way no matter which adapter they are using. This means you can use the same Query
Language whether your data lives in MySQL, MongoDB, PostgreSQL, etc.</p>
<h2 id="query-methods">Query Methods</h2>
<p>Every model in Waterline will have a set of query methods exposed on it to allow
you to interact with the database in a normalized fashion.
These are known as the CRUD (<code>Create</code>, <code>Read</code>, <code>Update</code> and <code>Delete</code>) methods and
is the primary way of interacting with your data.</p>
<p>There are also a special set of queries known as <em>dynamic queries</em>.
These are special class methods that are dynamically generated when you initialize Waterline.
We call them dynamic finders. They perform many of the same functions as the other class
methods but you can call them directly on an attribute in your model.</p>
<p>For most class methods, the callback parameter is optional and if one is not supplied,
it will return a chainable object.</p>
<h3 id="findcriteria-callback">.find(criteria, [callback])</h3>
<p><code>find</code> will return an array of records that match the supplied criteria.
Criteria can be built using the Query Language.</p>
<ul>
<li>The <code>criteria</code> is required and accepts <code>{}</code>, <code>[{}]</code>, <code>string</code> and <code>int</code> data types.</li>
<li>The <code>callback</code> function is optional.</li>
</ul>
<p>Any string arguments passed must be the ID of the record.
This method will always return records in an array.
If you are trying to find an attribute that is an array, you must wrap it in an additional
set of brackets otherwise Waterline will think you want to perform an <code>inQuery</code>.</p>
<pre><code class="lang-js">User.find({
    name: <span class="hljs-string">&apos;Walter Jr&apos;</span>
  })
  .exec(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, users</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-built_in">console</span>.log(err);
    }
    <span class="hljs-built_in">console</span>.log(users);
  });
</code></pre>
<h3 id="findonecriteria-callback">.findOne(criteria, [callback])</h3>
<p><code>findOne</code> will return an object with the first matching result in the data store.</p>
<ul>
<li>The <code>criteria</code> is required and accepts <code>{}</code>, <code>[{}]</code>, <code>string</code> and <code>int</code> data types.</li>
<li>The <code>callback</code> function is optional.</li>
</ul>
<p>Any string arguments passed must be the ID of the record.
If you are trying to find an attribute that is an array, you must wrap it in an additional
set of brackets otherwise Waterline will think you want to perform an <code>inQuery</code>.</p>
<pre><code class="lang-js">User.findOne({
    name: <span class="hljs-string">&apos;Walter Jr&apos;</span>
  })
  .exec(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, user</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-built_in">console</span>.log(err);
    }
    <span class="hljs-built_in">console</span>.log(user);
  });
</code></pre>
<h3 id="createcriteria-callback">.create(criteria, [callback])</h3>
<p><code>create</code> will attempt to create a new record in the datastore.
If the data is valid and passes all validations it will be sent to the adapters <code>create</code> method.</p>
<ul>
<li>The <code>criteria</code> is required and accepts <code>{}</code> and <code>[{}]</code> data types.</li>
<li>The <code>callback</code> function is optional.</li>
</ul>
<pre><code class="lang-js">User.create({
    name: <span class="hljs-string">&apos;Walter Jr&apos;</span>
  })
  .exec(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, user</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-built_in">console</span>.log(err);
    }
    <span class="hljs-built_in">console</span>.log(user);
  });
</code></pre>
<h3 id="findorcreatecriteria-values-callback">.findOrCreate(criteria, [values, callback])</h3>
<p><code>findOrCreate</code> will return a single record if one was found or created,
or an array of records if multiple get found/created via the supplied criteria or values.
Criteria can be built using the Query Language.</p>
<ul>
<li>The <code>criteria</code> is required and accepts <code>{}</code>, <code>[{}]</code>, <code>string</code> and <code>int</code> data types.</li>
<li>The <code>values</code> is optional and accepts <code>{}</code> and <code>[{}]</code> data types.</li>
<li>The <code>callback</code> function is optional.</li>
</ul>
<p>Any string arguments passed must be the ID of the record.
This method can return a single record or an array of records.
If a model is not found and creation values are omitted, it will get created with the supplied criteria values.</p>
<p>Unless an adapter implements its own version of <code>findOrCreate</code>, <code>findOrCreate</code> will do the
<code>find</code> and <code>create</code> calls in two separate steps (not transactional).
In a high frequency scenario it&apos;s possible for duplicates to be created if the query field(s) are not indexed.</p>
<p>Either user(s) with the name &quot;Walter Jr&quot; get returned or
a single user gets created with the name &quot;Walter Jr&quot; and returned:</p>
<pre><code class="lang-js">User.findOrCreate({
    name: <span class="hljs-string">&apos;Walter Jr&apos;</span>
  })
  .exec(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, users</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-built_in">console</span>.log(err);
    }
    <span class="hljs-built_in">console</span>.log(users);
  });
</code></pre>
<h3 id="updatesearch-criteria-values-callback">.update(search criteria, values, [callback])</h3>
<p><code>update</code> will attempt to update any records matching the criteria passed in.
Criteria can be built using the Query Language.</p>
<ul>
<li>The <code>criteria</code> is required and accepts <code>{}</code>, <code>[{}]</code>, <code>string</code> and <code>int</code> data types.</li>
<li>The <code>values</code> is required and accepts <code>{}</code> and <code>[{}]</code> data types.</li>
<li>The <code>callback</code> function is optional.</li>
</ul>
<p>Although you may pass <code>.update()</code> an object or an array of objects,
it will always return an array of objects. Any string arguments passed must be the ID
of the record. If you specify a primary key instead of a criteria object,
any <code>.where()</code> filters will be ignored.</p>
<pre><code class="lang-js">User.update({
    name: <span class="hljs-string">&apos;Walter Jr&apos;</span>
  }, {
    name: <span class="hljs-string">&apos;Flynn&apos;</span>
  })
  .exec(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, user</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-built_in">console</span>.log(err);
    }
    <span class="hljs-built_in">console</span>.log(user);
  });
</code></pre>
<h3 id="destroycriteria-callback">.destroy(criteria, [callback])</h3>
<p><code>destroy</code> will destroy any records matching the provided criteria.
Criteria can be built using the Query Language.</p>
<ul>
<li>The <code>criteria</code> is required and accepts <code>{}</code>, <code>[{}]</code>, <code>string</code> and <code>int</code> data types.</li>
<li>The <code>callback</code> function is optional.</li>
</ul>
<p>If you want to confirm the record exists before you delete it,
you must first perform a <code>.find()</code>. Any string arguments passed must be the ID of the record.</p>
<pre><code class="lang-js">User.destroy({
    name: <span class="hljs-string">&apos;Flynn&apos;</span>
  })
  .exec(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-built_in">console</span>.log(err);
    }
  });
</code></pre>
<h3 id="queryquery-data-callback">.query(query, [data], callback)</h3>
<p>Some adapters, such as <code>sails-mysql</code> and <code>sails-postgresql</code>, support the query function
which will run the provided RAW query against the database.
This can sometimes be useful if you want to run complex queries and performance is very important.</p>
<ul>
<li>The <code>query</code> is required and accepts <code>string</code> data types.</li>
<li>The <code>data</code> is optional and accepts <code>array</code> data types.</li>
<li>The <code>callback</code> function is required.</li>
</ul>
<p>The type of the results returned depend on your adapter: <code>sails-mysql</code> returns an array of objects
and <code>sails-postgresql</code> returns an object containing metadata and the actual results within a &apos;rows&apos; array.
This function does currently not support promises.</p>
<p>Using PostgreSQL:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> title = <span class="hljs-string">&quot;The King&apos;s Speech&quot;</span>;
Movie.query(<span class="hljs-string">&apos;SELECT * FROM movie WHERE title = $1&apos;</span>, [title], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, results</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Found the following movie: &apos;</span>, results.rows[<span class="hljs-number">0</span>]);
});
</code></pre>
<p>Using MySQL:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> title = <span class="hljs-string">&quot;The King&apos;s Speech&quot;</span>;
Movie.query(<span class="hljs-string">&apos;SELECT * FROM movie WHERE title = $1&apos;</span>, [title], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, results</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Found the following movie: &apos;</span>, results[<span class="hljs-number">0</span>]);
});
</code></pre>
<h2 id="query-language">Query Language</h2>
<p>The Waterline Query Language is an object based criteria used to retrieve the
records from any of the supported database adapters.
This allows you to change your database without changing your codebase.</p>
<p>All queries inside of Waterline are case insensitive. This allows for easier querying
but makes indexing strings tough. This is something to be aware of if you are
indexing and searching on string fields.</p>
<h3 id="query-language-basics">Query Language Basics</h3>
<p>The criteria objects are formed using one of four types of object keys.
These are the top level keys used in a query object. It is loosely based on the
criteria used in MongoDB with a few slight variations.</p>
<p>Queries can be built using either a <code>where</code> key to specify attributes,
which will allow you to also use query options such as <code>limit</code> and <code>skip</code> or
if <code>where</code> is excluded the entire object will be treated as a <code>where</code> criteria.</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  skip: <span class="hljs-number">20</span>,
  limit: <span class="hljs-number">10</span>,
  sort: <span class="hljs-string">&apos;name DESC&apos;</span>
});
</code></pre>
<p>Or:</p>
<pre><code class="lang-js">User.find({
  name: <span class="hljs-string">&apos;John&apos;</span>
});
</code></pre>
<h4 id="key-pairs">Key Pairs</h4>
<p>A key pair can be used to search records for values matching exactly what is specified.
This is the base of a criteria object where the key represents an attribute on a model
and the value is a strict equality check of the records for matching values.</p>
<pre><code class="lang-js">User.find({
  name: <span class="hljs-string">&apos;John&apos;</span>
});
</code></pre>
<p>They can be used together to search multiple attributes:</p>
<pre><code class="lang-js">User.find({
  name: <span class="hljs-string">&apos;John&apos;</span>,
  country: <span class="hljs-string">&apos;France&apos;</span>
});
</code></pre>
<h4 id="modified-pairs">Modified Pairs</h4>
<p>Modified pairs also have model attributes for keys but they also use any of the
supported criteria modifiers to perform queries where a strict equality check wouldn&apos;t work.</p>
<pre><code class="lang-js">User.find({
  name: {
    contains: <span class="hljs-string">&apos;alt&apos;</span>
  }
})
</code></pre>
<h4 id="in-pairs">In Pairs</h4>
<p>In queries work similarly to MySQL <code>in</code> queries. Each element in the array is treated as <code>or</code>.</p>
<pre><code class="lang-js">User.find({
  name: [<span class="hljs-string">&apos;John&apos;</span>, <span class="hljs-string">&apos;Walter&apos;</span>]
});
</code></pre>
<h4 id="not-in-pairs">Not-In Pairs</h4>
<p>Not-In queries work similar to <code>in</code> queries, except for the nested object criteria.</p>
<pre><code class="lang-js">User.find({
  name: {
    <span class="hljs-string">&apos;!&apos;</span>: [<span class="hljs-string">&apos;John&apos;</span>, <span class="hljs-string">&apos;Walter&apos;</span>]
  }
});
</code></pre>
<h4 id="or-pairs">Or Pairs</h4>
<p>Performing <code>OR</code> queries is done by using an array of query pairs.
Results will be returned that match any of the criteria objects inside the array.</p>
<pre><code class="lang-js">User.find({
  or: [
    {
      name: <span class="hljs-string">&apos;John&apos;</span>
    },
    {
      occupation: <span class="hljs-string">&apos;Developer&apos;</span>
    }
  ]
});
</code></pre>
<h3 id="criteria-modifiers">Criteria Modifiers</h3>
<p>The following modifiers are available to use when building queries:</p>
<ul>
<li><code>&lt;</code> or <code>lessThan</code></li>
<li><code>&lt;=</code> or <code>lessThanOrEqual</code></li>
<li><code>&gt;</code> or <code>greaterThan</code></li>
<li><code>&gt;=</code> or <code>greaterThanOrEqual</code></li>
<li><code>!</code> or <code>not</code></li>
<li><code>like</code></li>
<li><code>contains</code></li>
<li><code>startsWith</code></li>
<li><code>endsWith</code></li>
</ul>
<h4 id="or-lessthan">&lt; or lessThan</h4>
<p>Searches for records where the value is less than the value specified.</p>
<pre><code class="lang-js">User.find({
  age: {
    <span class="hljs-string">&apos;&lt;&apos;</span>: <span class="hljs-number">30</span>
  }
});
</code></pre>
<h4 id="or-lessthanorequal">&lt;= or lessThanOrEqual</h4>
<p>Searches for records where the value is less or equal to the value specified.</p>
<pre><code class="lang-js">User.find({
  age: {
    <span class="hljs-string">&apos;&lt;=&apos;</span>: <span class="hljs-number">21</span>
  }
});
</code></pre>
<h4 id="or-greaterthan">&gt; or greaterThan</h4>
<p>Searches for records where the value is more than the value specified.</p>
<pre><code class="lang-js">User.find({
  age: {
    <span class="hljs-string">&apos;&gt;&apos;</span>: <span class="hljs-number">18</span>
  }
});
</code></pre>
<h4 id="or-greaterthanorequal">&gt;= or greaterThanOrEqual</h4>
<p>Searches for records where the value is more or equal to the value specified.</p>
<pre><code class="lang-js">User.find({
  age: {
    <span class="hljs-string">&apos;&gt;=&apos;</span>: <span class="hljs-number">21</span>
  }
});
</code></pre>
<h4 id="or-not">! or not</h4>
<p>Searches for records where the value is not equal to the value specified.</p>
<pre><code class="lang-js">User.find({
  name: {
    <span class="hljs-string">&apos;!&apos;</span>: <span class="hljs-string">&apos;John&apos;</span>
  }
});
</code></pre>
<h4 id="like">like</h4>
<p>Searches for records using pattern matching with the <code>%</code> sign.</p>
<pre><code class="lang-js">User.find({
  food: {
    <span class="hljs-string">&apos;like&apos;</span>: <span class="hljs-string">&apos;%burgers&apos;</span>
  }
});
</code></pre>
<h4 id="contains">contains</h4>
<p>A shorthand for pattern matching both sides of a string.
Will return records where the value contains the string anywhere inside of it.</p>
<pre><code class="lang-js">User.find({
  class: {
    &apos;like&apos;: &apos;%history%&apos;
  }
});
</code></pre>
<pre><code class="lang-js">User.find({
  class: {
    &apos;contains&apos;: &apos;history&apos;
  }
});
</code></pre>
<h4 id="startswith">startsWith</h4>
<p>A shorthand for pattern matching the right side of a string
Will return records where the value starts with the supplied string value.</p>
<pre><code class="lang-js">User.find({
  class: {
    &apos;startsWith&apos;: &apos;french&apos;
  }
});
</code></pre>
<pre><code class="lang-js">User.find({
  class: {
    &apos;like&apos;: &apos;french%&apos;
  }
});
</code></pre>
<h4 id="endswith">endsWith</h4>
<p>A shorthand for pattern matching the left side of a string.
Will return records where the value ends with the supplied string value.</p>
<pre><code class="lang-js">User.find({
  class: {
    &apos;endsWith&apos;: &apos;can&apos;
  }
});
</code></pre>
<pre><code class="lang-js">User.find({
  class: {
    &apos;like&apos;: &apos;%can&apos;
  }
});
</code></pre>
<h4 id="date-ranges">Date Ranges</h4>
<p>You can do date range queries using the comparison operators.</p>
<pre><code class="lang-js">User.find({
  date: {
    <span class="hljs-string">&apos;&gt;&apos;</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">&apos;2/4/2014&apos;</span>),
    <span class="hljs-string">&apos;&lt;&apos;</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">&apos;2/7/2014&apos;</span>)
  }
});
</code></pre>
<h3 id="query-options">Query Options</h3>
<p>Query options allow you refine the results that are returned from a query.</p>
<h4 id="limit-results">Limit results</h4>
<p>Limit the number of results returned from a query.</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  limit: <span class="hljs-number">20</span>
});
</code></pre>
<h4 id="skip-results">Skip results</h4>
<p>Return all the results excluding the number of items to skip.</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  skip: <span class="hljs-number">10</span>
});
</code></pre>
<h4 id="pagination">Pagination</h4>
<p><code>skip</code> and <code>limit</code> can be used together to build up a pagination system.</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  limit: <span class="hljs-number">10</span>,
  skip: <span class="hljs-number">10</span>
});
</code></pre>
<h4 id="sort-results">Sort results</h4>
<p>Results can be sorted by attribute name. Simply specify an attribute name for
natural (ascending) sort, or specify an <code>asc</code> or <code>desc</code> flag for ascending or
descending orders respectively.</p>
<p>Sort by name in ascending order:</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  sort: <span class="hljs-string">&apos;name&apos;</span>
});
</code></pre>
<p>Sort by name in descending order:</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  sort: <span class="hljs-string">&apos;name DESC&apos;</span>
});
</code></pre>
<p>Sort by name in ascending order:</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  sort: <span class="hljs-string">&apos;name ASC&apos;</span>
});
</code></pre>
<p>Sort by binary notation</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  sort: {
    name: <span class="hljs-number">1</span>
  }
});
</code></pre>
<p>Sort by multiple attributes:</p>
<pre><code class="lang-js">User.find({
  where: {
    name: <span class="hljs-string">&apos;John&apos;</span>
  },
  sort: {
    name:  <span class="hljs-number">1</span>,
    age: <span class="hljs-number">0</span>
  }
});
</code></pre>
<h4 id="select-a-field">Select a field</h4>
<p>Apply a projection to a Waterline query.</p>
<p>This example only returns the field name:</p>
<pre><code class="lang-js">User.find({
  where: {
    age: {
      <span class="hljs-string">&apos;&lt;&apos;</span>: <span class="hljs-number">30</span>
    }
  },
  select: [<span class="hljs-string">&apos;name&apos;</span>]
});
</code></pre>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="models.html#lifecycle-callbacks" class="navigation navigation-prev " aria-label="Previous page: Lifecycle Callbacks">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="queries.html#query-methods" class="navigation navigation-next " aria-label="Next page: Query Methods">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Query Language","level":"9.1","depth":1,"next":{"title":"Query Methods","level":"9.1.1","depth":2,"anchor":"#query-methods","path":"queries.md","ref":"queries.md#query-methods","articles":[]},"previous":{"title":"Lifecycle Callbacks","level":"8.1.3","depth":2,"anchor":"#lifecycle-callbacks","path":"models.md","ref":"models.md#lifecycle-callbacks","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","anchorjs","-search","-fontsettings","-sharing","versions","ga","github","feathers-collapsible-menu"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/strapi/strapi"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"highlight":{},"ga":{"configuration":"auto","token":"UA-54313258-1"},"versions":{"type":"branches","options":[{"value":"/documentation/1.x.x/","text":"Versions 1.x.x","selected":true},{"value":"/documentation/3.x.x/","text":"Versions 3.x.x","selected":false}]},"edit-link":{"label":"Edit This Page","base":"https://github.com/strapi/strapi/edit/structure/doc/docs/1.x.x"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{},"feathers-collapsible-menu":{}},"theme":"default","author":"Strapi","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Strapi documentation","language":"en","gitbook":"*"},"file":{"path":"queries.md","mtime":"2017-10-10T09:12:07.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-10-10T09:13:35.883Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-versions/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-feathers-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    

    </body>
</html>

