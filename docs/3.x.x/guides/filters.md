# Filters

See the [filters' concepts](../concepts/concepts.md#filters) for details.

::: note
By default, the filters can only be used from `find` endpoints generated by the Content Type Builder and the [CLI](../cli/CLI.md). If you need to implement a filters system somewhere else, read the [programmatic usage](#programmatic-usage) section.
:::

## Available operators

The available operators are separated in four different categories:
 - [Filters](#filters)
 - [Sort](#sort)
 - [Limit](#limit)
 - [Start](#start)

### Filters

Easily filter results according to fields values.

 - `=`: Equals
 - `_ne`: Not equals
 - `_lt`: Lower than
 - `_gt`: Greater than
 - `_lte`: Lower than or equal to
 - `_gte`: Greater than or equal to
 - `_in`: Include in array
 - `_contains`: Contains
 - `_containss`: Contains case sensitive
 - `_in`: Matches any value in the array of values
 - `_nin`: Doesn't match any value in the array of values

#### Examples

Find users having `John` as first name.

`GET /users?firstName=John`

Find products having a price equal or greater than `3`.

`GET /products?price_gte=3`

Find multiple product with id 3, 6, 8
`GET /products?id_in=3&id_in=6&id_in=8`

Find posts written by a user belongs to the strapi company.
`GET /posts?author.company.name=strapi`

::: note
You can't use filter to have specific results inside relation, like "Find users and only their posts older than yesterday" as example. If you need it, you can modify or create your own service or use [GraphQL](./graphql.md#query-api).
:::

::: warning
This filter isn't available for `upload` plugin.
:::

### Sort

Sort according to a specific field.

#### Example

Sort users by email.

 - ASC: `GET /users?_sort=email:ASC`
 - DESC: `GET /users?_sort=email:DESC`

### Limit

Limit the size of the returned results.

#### Example

Limit the result length to 30.

`GET /users?_limit=30`

### Start

Skip a specific number of entries (especially useful for pagination).

#### Example

Get the second page of results.

`GET /users?_start=10&_limit=10`

## Programmatic usage

Requests system can be implemented in custom code sections.
In the newest version of strapi, we introduced the Builder API which is an easy/new way to manipulate filters.

### Extracting requests filters

To extract the filters from a JavaScript object or a request, you need to call the [`Builder` API](../api-reference/reference.md#strapiutils).

::: note
The returned objects are formatted according to the ORM used by the model.
:::

#### Example

**Path —** `./api/product/services/Product.js`.

```JS
const { Builder } = require('strapi-utils');

module.exports = {
  // Find products having a price equal or greater than `3`.
  fetchExpensiveProducts: (params, populate) => {
    const filter = new Builder(Product)
      .gte('price', 3)
      .convert(); // the Convert method will convert your filter according to the Model's ORM (Mongoose/Bookshelf).

    return new Query(Product)
      .find(filter)
      .populate(populate)
      .execute();
  },

  // Find products that belongs to strapi company ordered by creation date.
  fetchLastestStrapiProducts: (params, populate) => {
    const filter = new Builder(Product)
      .eq('company.name', 'strapi')
      .contains('company.country', 'fr')
      .sort('createdAt:DESC') // createdAt:desc will also work here
      .convert();

    return new Query(Product)
      .find(filter)
      .populate(populate)
      .execute();
  }
}

```

**Path —** `./api/product/controllers/Product.js`.

```js
const { Builder } = require('strapi-utils');

// Define a list of params.
const params = {
  '_limit': 20,
  '_sort': 'email:desc'
};

// Convert params.
const formattedParams = new Builder(Product, params).build(); // { limit: 20, sort: { order: 'desc', key: 'email' } }
const convertedParams = new Builder(Product, params).convert(); // { limit: 20, sort: '-email' }
```

### Query usage

#### Example

**Path —** `./api/product/controllers/Product.js`.

```js
const { Builder, Query } = require('strapi-utils');

module.exports = {
  find: async (ctx) => {
    // Convert params.
    const filter = new Builder(Product, ctx.request.query).convert();

    // Get the list of users according to the request query.
    const filteredUsers = await new Query(Product)
      .find(filter)
      .execute();

    // Finally, send the results to the client.
    ctx.body = filteredUsers;
  };
};
```
